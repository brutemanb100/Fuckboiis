const botconfig = require("./botconfig.json");

const Discord = require("discord.js");

require('events').EventEmitter.prototype._maxListeners = 100;



const bot = new Discord.Client({diableEveryone: true});



bot.on("ready", async () => {

	console.log(`${bot.user.username} is online!`);

  bot.user.setActivity("with his meat!");

});



bot.on("message", async message => {

    if(message.author.bot) return;

    if(message.channel.type === "dm") return;



    let prefix = botconfig.prefix;

    let messageArray = message.content.split(" ");

    let cmd = messageArray[0];

    let args = messageArray.slice(1);



    if(cmd === `${prefix}aretrapsgay`){

      return message.channel.send("Yes!");

    }



});



bot.on("message", async message => {

    if (message.author.bot) return;

    if(message.channel.type === "dm") return;



    let prefix = botconfig.prefix;

    let messageArray = message.content.split(" ");

    let cmd = messageArray[0];

    let args = messageArray.slice(1);



    if(cmd === `${prefix}rolldie`){

      var options = ["Sniff Asshole", "Lick Eyeball", "Traps Are Gay", "Fist Mouth", "Fuck Bellybutton", "Spit On Coochie", "Slurp Earwax", "Molest Feet", "Fuck Nostrail"];

      var response = options[Math.floor(Math.random()*options.length)];

      message.channel.send(response).then().catch(console.error);

    }



});



bot.on("message", async message => {

    if (message.author.bot) return;

    if(message.channel.type === "dm") return;



    let prefix = botconfig.prefix;

    let messageArray = message.content.split(" ");

    let cmd = messageArray[0];

    let args = messageArray.slice(1);



    if(cmd === `${prefix}nasty8ball`){

      var options = ["Ask someone who gives a fuck.", "The cake is a lie.", "Why are you so fucking retarded?", "Shit, I guess so.", "There was a better chance of Anakin beating Obi Wan on Mustafar.", "You're out of your goddamn mind.", "In that world, Hank Hill would rather do drugs than mow his lawn.", "Traps Are Gay", "Go tongue punch a donkeys starfish.", "But I don't even like you."];

      var response = options[Math.floor(Math.random()*options.length)];

      message.channel.send(response).then().catch(console.error);

    }



});



bot.on("message", async message => {

    if(message.author.bot) return;

    if(message.channel.type === "dm") return;



    let prefix = botconfig.prefix;

    let messageArray = message.content.split(" ");

    let cmd = messageArray[0];

    let args = messageArray.slice(1);



if(cmd === `${prefix}info`){

        let sicon = message.guild.displayAvatarURL;

        let serverembed = new Discord.RichEmbed()

        .setDescription("Server Information")

        .setColor("#2b0260")

        .setThumbnail(sicon)

        .addField("Server Name", message.guild.name)

        .addField("Created On", message.guild.createdAt)

        .addField("User Joined", message.member.joinedAt)

        .addField("Total Members", message.guild.memberCount);

        return message.channel.send(serverembed);

    }



});



	bot.on("message", async message => {

	    if(message.author.bot) return;

	    if(message.channel.type === "dm") return;



	    let prefix = botconfig.prefix;

	    let messageArray = message.content.split(" ");

	    let cmd = messageArray[0];

	    let args = messageArray.slice(1);



			if(cmd === `${prefix}report`){



				let rUser = message.guild.member(message.mentions.users.first() || message.guild.members.get(args[0]));

				if(!rUser) return message.channel.send("Couldn't find user.");

				let reason = args.join(" ").slice(22);



				let incidentEmbed = new Discord.RichEmbed( )

				.setDescription("Reports")

				.setColor("#2b0260")

				.addField("Traps are gay.", `${rUser} with ID: ${rUser.id}`)

				.addField("Reported By", `${message.author} with ID: ${message.author.id}`)

				.addField("Channel", message.channel)

				.addField("Time", message.createdAt)

				.addField("Reason", reason)

				.addField("To cancel this report, please type the following:","Traps are gay.");



				let reportschannel = message.guild.channels.find(`name`, "reports");

				if(!reportschannel) return message.channel.send("Couldn't find reports channel.");



				message.delete().catch(O_o=>{});

				reportschannel.send(incidentEmbed);



				return;

			}



		});



		bot.on("message", async message => {

		    if(message.author.bot) return;

		    if(message.channel.type === "dm") return;



		    let prefix = botconfig.prefix;

		    let messageArray = message.content.split(" ");

		    let cmd = messageArray[0];

		    let args = messageArray.slice(1);



				if(cmd === `${prefix}say`){

					if(!message.member.hasPermission("MANAGE_MESSAGES")) return message.reply("no");

					let botmessage = args.join(" ")

					message.delete().catch();

					message.channel.send(botmessage);

				}

		});



bot.on("message", async message => {

		if(message.author.bot) return;

		if(message.channel.type === "dm") return;



		let prefix = botconfig.prefix;

		let messageArray = message.content.split(" ");

		let cmd = messageArray[0];

		let args = messageArray.slice(1);



		if(cmd === `${prefix}cmd`){

					let cmdembed = new Discord.RichEmbed( )

					.setDescription("Commands List")

					.setColor("#2b0260")

					.addField("Commands","!nasty8ball\n!rolldie\n!funnyjoke\n!cmd\n!aretrapsgay\n!aretrapsstraight\n!hi\n!dick\n!creator\n!purpose\n");

					message.delete().catch(O_o=>{});

        return message.channel.send(cmdembed);



		}

    

 });





bot.login(botconfig.token);
